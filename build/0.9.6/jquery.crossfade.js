/**
 * CrossFade Gallery - Image gallery for jQuery
 * Written by Akop Kesheshyan
 * Twitter: http://twitter.com/creativator_ru
 *
 * @author Creativator Media
 * @site http://creativator.net/
 * @version 0.9.6
 *
 **/
 (function(a){a.extend({crossFadeGallery:{object:{},offset:0,timer:true,settings:{speed:1000,auto:5,width:640,height:480,controls:{},tooltips:{},thumbnails:{handle:false,size:50},stopOnHover:true,onLoad:false,onChange:false},init:function(g,e){this.object=g;this.settings=a.extend(this.settings,e);a(this.object).css({listStyle:"none",margin:0,padding:0,position:"relative",overflow:"hidden",width:this.settings.width+"px",height:this.settings.height+"px"});var b=a("li",this.object).length;a("li",this.object).each(function(j){a(this).css({position:"absolute",zIndex:b-j})}).filter(":first").addClass("active");if(this.settings.controls){a(this.object).parent().append($controls=a('<a href="#prevImage" class="cf_controls prevImage">prevImage</a><a href="#nextImage" class="cf_controls nextImage">nextImage</a>').css({position:"absolute",zIndex:800,height:"38px",width:"20px",overflow:"hidden",textIndent:"-9999px",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAABGCAIAAABDrSOmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAANVJREFUeNrs1jEKwyAYBeBAV6dAwCMFMuY4Tt4gV3LJLILglBvkABnEPiiE0im+QKvFNwQdPpzy/6/r6ogQ4v36uC6llOu69n1vjMl7E9J7n1IKIXy8f1Xii/PfymEYKpU4ly+dc6Tcto2RiLUWct/3bInM8xxjhF+WhfnLx3E8jqP55iv30zSRXinVtZTWNzKitc7eTOebaBrMZjv3+F1PbtbyPLO9avd81yjMo72QHr0FHh0mG2PiQ6K9oMMwEnMf07vJJr8r0TRI+Qr6Bil/kKcAAwBnuNaJygDpBAAAAABJRU5ErkJggg%3D%3D) #000 no-repeat",backgroundPosition:"",marginTop:"-"+((this.settings.height/2)+40)+"px"}).click(function(){if(a(this).hasClass("nextImage")){a.crossFadeGallery.nextImage()}else{if(a(this).hasClass("prevImage")){a.crossFadeGallery.prevImage()}}return false}));$controls.filter(".nextImage").css({marginLeft:(this.settings.width-20)+"px",backgroundPosition:"0 -35px"})}if(this.settings.tooltips){var c=this.settings.width;var d=this.settings.height;a("li",this.object).each(function(j){a(this).prepend(a('<div id="tooltip-'+j+'" class="cf_tooltip"></div>').css({width:(c-10)+"px",padding:"10px",position:"absolute",background:"#000",zIndex:900+(b-j),color:"#fff"}).html(a("img",this).attr("title")))})}if(this.settings.thumbnails){if(!this.settings.thumbnails.handle){a(this.object).parent().append(h=a('<div id="cf_thumbnails"><ul></ul></div>'));var f=this.settings.thumbnails.size;a("li img",this.object).each(function(j){a("ul",h).append('<li><a href="#" rel="'+j+'"><img class="cf_thumbnail" height="'+f+'" src="'+a(this).attr("src")+'" alt="" /></a></li>')})}else{var h=a(this.settings.thumbnails.handle)}h.css({width:(this.settings.width-10)+"px",background:"#000",overflow:"hidden",padding:"5px",position:"absolute",zIndex:1000,marginTop:"-"+(this.settings.thumbnails.size+10)+"px"}).find("ul").css({listStyle:"none",margin:0,padding:0,width:((this.settings.thumbnails.size+10)*b)+"px"}).find("li").css({"float":"left",marginRight:"10px",width:this.settings.thumbnails.size+"px",height:this.settings.thumbnails.size+"px",overflow:"hidden"}).find("a").click(function(){a.crossFadeGallery.stopSlideShow();a.crossFadeGallery.setImage(a(this).attr("rel"));a.crossFadeGallery.playSlideShow();return false})}this.playSlideShow();if(a.isFunction(this.settings.onLoad)){return this.settings.onLoad(this)}},nextImage:function(){(a(".active",this.object).next().size())?this.setImage(this.offset+1):this.setImage(0)},prevImage:function(){(a(".active",this.object).prev().size())?this.setImage(this.offset-1):this.setImage(0)},setImage:function(b){if(this.offset<b){a("li",this.object).each(function(c){if(a.crossFadeGallery.offset!=c&&c<b){a(this).hide()}});a(".active",this.object).fadeOut(this.settings.speed,function(){a(this).removeClass("active");a(a("li",a.crossFadeGallery.object)[b]).addClass("active");a.crossFadeGallery.offset=b})}if(this.offset>b){a(a("li",this.object)[b]).fadeIn(this.settings.speed,function(){a(".active",a.crossFadeGallery.object).removeClass("active");a(this).addClass("active").nextAll().show();a.crossFadeGallery.offset=b})}if(a.isFunction(this.settings.onChange)){return this.settings.onChange(b,this)}},stopSlideShow:function(){if(this.timer){window.clearTimeout(this.timer)}},playSlideShow:function(){this.stopSlideShow();if(this.settings.auto){if(this.settings.stopOnHover){a(this.object).hover(function(){a.crossFadeGallery.stopSlideShow()},function(){a.crossFadeGallery.playSlideShow()})}this.timer=window.setTimeout(function(){a.crossFadeGallery.playSlideShow();a.crossFadeGallery.nextImage()},a.crossFadeGallery.settings.auto*1000)}}}});a.extend(a.fn,{crossFadeGallery:function(b){a.crossFadeGallery.init(this,b)}})})(jQuery);